<!doctype html>
<html>














    <head>
        <!-- Recommended meta tags -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">

        <!-- linking CSS -->
        <link rel="stylesheet" href="./style.css">

        <!-- title and favicon -->
        <title>
            Miles to Muppets
        </title>
        <link rel="icon" type="image/x-icon" href="./assets/favicon.jpeg">

        <!-- pyscript stuff? -->
        <!-- <link rel="stylesheet" href="https://pyscript.net/releases/2022.12.1/pyscript.css"/> -->
        <!-- <script defer src="https://pyscript.net/releases/2022.12.1/pyscript.js"></script> -->
        <!-- <link rel="stylesheet" href="https://pyscript.net/snapshots/2023.09.1.RC1/core.css"> -->
        <!-- <script type="module" src="https://pyscript.net/snapshots/2023.09.1.RC1/core.js"></script> -->
        <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.3/core.css">
        <script type="module" src="https://pyscript.net/releases/2024.1.3/core.js"></script>
    </head>











    
    <body class="body-details">
        <!-- load python file -->
        <py-config>
            packages = ['milesToMuppets']
        </py-config>

        <!-- This is just comedic -->
         <!-- https://stackoverflow.com/questions/13350663/greyed-out-waiting-page-in-javascript -->
        <!-- <div id="blackout" style="background-image:url(./assets/favicon.jpeg)"; display: none;>  -->

        </div>

        <!-- <py-script>
            from js import document

            document.getElementById('blackout').style.display = 'block';
        </py-script> -->

        <!-- <script type="py" src="./main.py" config="pyscript.toml"></script> -->
        <script type="py" src="./main.py"></script>
        <!-- <py-script src="./main.py"></py-script> -->

        <div class="loading" id="loading">
            <h1>Loading...</h1>
        </div>
        <div class="title_text"> 
            <header>Miles to Muppets</header>
        </div>
        <div class="sub_title_text">
            <p id="version_num" style="font-weight: bold;">Version number loading...</p>
            <!-- <p>A calculator that converts miles to how many songs you can listen to from a muppets album</p> -->
            <p>A calculator that converts distance in miles to how many songs you can listen to from a selected muppets album~!</p>
        </div>
        
        <hr class="solid">

        <!-- get client id and secret -->
        <!-- https://www.w3schools.com/tags/tag_input.asp -->
        <form id="data_form" class="data-form">
            <h2 class="section-text">Spotify info</h2><br>
            <!-- <label for="spotify_id">Spotify ID:</label> -->
            <input type="text" id="spotify_id" placeholder="Spotify ID" class="input-box" name="spotify_id"> <br>
            <!-- <label for="spotify_id">Spotify Secret:</label> -->
            <input type="text" id="spotify_secret" placeholder="Spotify Secret" class="input-box" name="spotify_secret"> <br>

            <!-- get album selection -->
            <h2 class="section-text">Album selection</h2>
            <div>
                <label for="song_selection">Muppets Most Wanted</label>
                <input type="radio" id="song_selection" name="song_selection" value="0"> <br>
                <label for="song_selection">The Muppets</label>
                <input type="radio" id="song_selection" name="song_selection" value="1"> <br>
            </div>
            
            <!-- get time / distance -->
            <h2 class="section-text">Other info</h2>
            <!-- <label for="mile_distance">Mile distance:</label> -->
            <input type="text" id="mile_distance" placeholder="Mile distance" class="input-box" name="mile_distance"> <br>
            <!-- <label for="mph_speed">MPH speed:</label> -->
            <input type="text" id="mph_speed" placeholder="MPH speed" class="input-box" name="mph_speed"> <br>

            <!-- submit button -->
            <br>
            <!-- py-onClick="run_muppet()" -->
            <button type="submit" id="submit_form" class="button-details">Submit!</button>

        </form>

        <script>
            // do not refresh page when submitting data
            var form = document.getElementById('data_form');
            function handleForm(event) { 
                event.preventDefault(); 
            }
            form.addEventListener("submit", handleForm);
        </script>

        <py-script>
            # <!-- set up the code to run function on button press -->
            from pyodide.ffi import create_proxy
            from js import document
            import milesToMuppets
            
            # <!-- Remove loading text -->
            document.getElementById("loading").remove()
            
            # <!-- Get rid of blackout -->
            # document.getElementById('blackout').style.display = 'none';

            # <!-- Edit the text below "Miles to Muppets" to include the version number -->
            document.getElementById("version_num").innerText = f"v{milesToMuppets.version}"

            # <!-- add event listener, proxy -->
            function_proxy = create_proxy(run_muppet)

            document.getElementById("data_form").addEventListener("submit", function_proxy)
        </py-script>

        <hr class="solid">
        
        <p id="results" name="results">results: </p>
    </body>

    <footer class="footer">
        <p>Note: This website is built for the mobile experience.</p>
        <p>Access the github <a href="https://github.com/SketchedDoughnut/miles-to-muppets">here!</a></p>
    </footer>
</html>
 
